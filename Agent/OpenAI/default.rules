# OpenAI Codex command policy (Starlark rules)
# Canonical global rules file for Codex-compatible prefix matching.

# Destructive git/file operations should require confirmation.
prefix_rule(pattern=["git", "reset", "--hard"], decision="prompt")
prefix_rule(pattern=["git", "clean", "-fd"], decision="prompt")
prefix_rule(pattern=["rm", "-rf"], decision="prompt")
prefix_rule(pattern=["Remove-Item", "-Recurse"], decision="prompt")
prefix_rule(pattern=["del", "/s"], decision="prompt")

# Network and remote fetch commands should require confirmation.
prefix_rule(pattern=["curl"], decision="prompt")
prefix_rule(pattern=["wget"], decision="prompt")
prefix_rule(pattern=["Invoke-WebRequest"], decision="prompt")

# Environment creation and local interpreter usage are allowed.
prefix_rule(pattern=["python", "-m", "venv"], decision="allow")
prefix_rule(pattern=[".venv\\Scripts\\python.exe"], decision="allow")
prefix_rule(pattern=["python"], decision="allow")

# Dependency installs should prompt to ensure local/project-scoped usage.
prefix_rule(pattern=["pip", "install"], decision="prompt")
prefix_rule(pattern=["uv", "pip", "install"], decision="prompt")
prefix_rule(pattern=["npm", "install", "-g"], decision="prompt")
prefix_rule(pattern=["pnpm", "add", "-g"], decision="prompt")
prefix_rule(pattern=["yarn", "global", "add"], decision="prompt")
prefix_rule(pattern=["gem", "install"], decision="prompt")
prefix_rule(pattern=["dotnet", "tool", "install", "-g"], decision="prompt")
prefix_rule(pattern=["cargo", "install"], decision="prompt")
